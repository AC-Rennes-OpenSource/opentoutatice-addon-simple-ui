<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:h="http://java.sun.com/jsf/html">
  
  <c:if test="false">
  	FIXME: export js treatment (and css as class) in HTML header
  </c:if>

  <a4j:outputPanel id="facesStatusMessagePanel" ajaxRendered="true" layout="block">
	
    <div class="facesStatusMessage">
      <c:if test="#{facesContext.maximumSeverity.ordinal >= 2}">
        <div class="alert alert-danger">
			<i class="glyphicons halflings warning-sign"></i> <span
				class="text-danger">#{messages['feedback.correctErrors']} pour le(s) champ(s) suivant(s):</span>
			<ul id="labels">
				<script type="text/javascript">
				window.onload = function(e) {
					var $ul = jQuery("#labels");
					jQuery("span.errorMessage").each(function() {
						jQuery(this).attr("style", "display: inline-block; margin-top: 5px;");
						var $firstParent = jQuery(this).closest("div[class*='form-group']");
						$firstParent.attr("style", "border: 1px solid #a94442; border-radius: 5px; padding-top: 5px; margin-left: 0px; margin-right: -1px;");
						var $label = $firstParent.children("label");
						$ul.append("<li>" + $label.text() + "</li>");
					});
				}
				</script>
			</ul>
		</div>
      </c:if>
    </div>

  </a4j:outputPanel>

</ui:composition>